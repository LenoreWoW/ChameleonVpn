<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline'">
  <title>BarqNet</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Three.js Background -->
  <div id="three-canvas"></div>

  <div class="app">
    <!-- Title Bar -->
    <div class="title-bar">
      <div class="title">BarqNet</div>
    </div>

    <!-- Main Content -->
    <div class="content">
      <!-- Step 1: Email Entry -->
      <div id="email-entry-state" class="state" style="display: block;">
        <div class="onboarding-container">
          <div class="onboarding-icon">üìß</div>
          <h1 class="onboarding-title">Welcome to BarqNet</h1>
          <p class="onboarding-subtitle">Enter your email address to get started with secure, private browsing</p>

          <div class="form-group">
            <label class="form-label">Email Address</label>
            <input type="email" id="email-input" class="form-input" placeholder="email@example.com" autocomplete="email">
          </div>

          <button id="email-submit-btn" class="btn btn-large">Continue</button>

          <p class="link-text" style="margin-top: 24px;">Already have an account? <a href="#" id="login-link" class="link-text">Sign In</a></p>
        </div>
      </div>

      <!-- Step 2: OTP Verification -->
      <div id="otp-verification-state" class="state" style="display: none;">
        <div class="onboarding-container">
          <div class="onboarding-icon">üîê</div>
          <h1 class="onboarding-title">Verify Your Email</h1>
          <p class="onboarding-subtitle">We've sent a 6-digit code to <span id="email-display"></span></p>

          <div class="otp-input-group">
            <input type="text" maxlength="1" class="otp-digit form-input" id="otp-1" autocomplete="off">
            <input type="text" maxlength="1" class="otp-digit form-input" id="otp-2" autocomplete="off">
            <input type="text" maxlength="1" class="otp-digit form-input" id="otp-3" autocomplete="off">
            <input type="text" maxlength="1" class="otp-digit form-input" id="otp-4" autocomplete="off">
            <input type="text" maxlength="1" class="otp-digit form-input" id="otp-5" autocomplete="off">
            <input type="text" maxlength="1" class="otp-digit form-input" id="otp-6" autocomplete="off">
          </div>

          <div id="otp-error" class="error-message" style="display: none;">Invalid code. Please try again.</div>

          <button id="otp-verify-btn" class="btn btn-large">Verify Code</button>

          <p class="link-text" style="margin-top: 24px;">Didn't receive code? <a href="#" id="resend-otp-link" class="link-text">Resend</a></p>
        </div>
      </div>

      <!-- Step 3: Password Creation -->
      <div id="password-creation-state" class="state" style="display: none;">
        <div class="onboarding-container">
          <div class="onboarding-icon">üîí</div>
          <h1 class="onboarding-title">Secure Your Account</h1>
          <p class="onboarding-subtitle">Create a strong password to protect your VPN account</p>

          <div class="form-group">
            <label class="form-label">Password</label>
            <input type="password" id="password-input" class="form-input" placeholder="Enter password" autocomplete="new-password">
          </div>

          <div class="form-group">
            <label class="form-label">Confirm Password</label>
            <input type="password" id="password-confirm-input" class="form-input" placeholder="Confirm password" autocomplete="new-password">
          </div>

          <div id="password-error" class="error-message" style="display: none;">Passwords don't match</div>

          <button id="password-submit-btn" class="btn btn-large">Create Account</button>
        </div>
      </div>

      <!-- Step 4: Login State (for returning users) -->
      <div id="login-state" class="state" style="display: none;">
        <div class="onboarding-container">
          <div class="onboarding-icon">üëã</div>
          <h1 class="onboarding-title">Welcome Back</h1>
          <p class="onboarding-subtitle">Sign in to access your secure VPN connection</p>

          <div class="form-group">
            <label class="form-label">Email Address</label>
            <input type="email" id="login-email-input" class="form-input" placeholder="email@example.com" autocomplete="email">
          </div>

          <div class="form-group">
            <label class="form-label">Password</label>
            <input type="password" id="login-password-input" class="form-input" placeholder="Enter password" autocomplete="current-password">
          </div>

          <div id="login-error" class="error-message" style="display: none;">Invalid credentials</div>

          <button id="login-submit-btn" class="btn btn-large">Sign In</button>

          <p class="link-text" style="margin-top: 24px;">New user? <a href="#" id="signup-link" class="link-text">Create Account</a></p>
        </div>
      </div>

      <!-- No Config State (after auth) -->
      <div id="no-config-state" class="state" style="display: none;">
        <div class="onboarding-container">
          <div class="onboarding-icon">üîí</div>
          <h2 class="onboarding-title" style="font-size: 28px;">No VPN Configuration</h2>
          <p class="onboarding-subtitle">Import an OpenVPN configuration file (.ovpn) to get started</p>
          <button id="import-btn" class="btn btn-large">Import .ovpn File</button>
          <button id="logout-btn" class="btn btn-text" style="margin-top: 16px;">Logout</button>
        </div>
      </div>

      <!-- VPN Credentials State (when auth-user-pass is required) -->
      <div id="vpn-credentials-state" class="state" style="display: none;">
        <div class="onboarding-container">
          <div class="onboarding-icon">üîë</div>
          <h2 class="onboarding-title" style="font-size: 28px;">VPN Authentication</h2>
          <p class="onboarding-subtitle">Enter your VPN server credentials to connect</p>

          <div class="form-group">
            <label class="form-label">VPN Username</label>
            <input type="text" id="vpn-username-input" class="form-input" placeholder="Enter VPN username" autocomplete="username">
          </div>

          <div class="form-group">
            <label class="form-label">VPN Password</label>
            <input type="password" id="vpn-password-input" class="form-input" placeholder="Enter VPN password" autocomplete="current-password">
          </div>

          <div id="vpn-credentials-error" class="error-message" style="display: none;">Invalid VPN credentials</div>

          <button id="vpn-credentials-submit-btn" class="btn btn-large">Connect to VPN</button>
          <button id="vpn-credentials-back-btn" class="btn btn-text" style="margin-top: 16px;">Back to Import</button>
        </div>
      </div>

      <!-- Connected/Disconnected State -->
      <div id="vpn-state" class="state" style="display: none;">
        <!-- Connection Status -->
        <div class="status-section">
          <div id="status-icon" class="status-icon disconnected">
            <span style="font-size: 48px;">‚óè</span>
          </div>
          <div id="status-text" class="status-text">Disconnected</div>
        </div>

        <!-- Server Info -->
        <div id="server-info" class="info-section">
          <div class="info-row">
            <span class="label">Server:</span>
            <span id="server-address" class="value">-</span>
          </div>
          <div class="info-row">
            <span class="label">Protocol:</span>
            <span id="protocol" class="value">-</span>
          </div>
          <div class="info-row">
            <span class="label">Local IP:</span>
            <span id="local-ip" class="value">-</span>
          </div>
          <div class="info-row">
            <span class="label">Duration:</span>
            <span id="duration" class="value">-</span>
          </div>
        </div>

        <!-- Traffic Stats -->
        <div id="stats-section" class="stats-section">
          <div class="stat">
            <div class="stat-label">Download</div>
            <div id="bytes-in" class="stat-value">0 MB</div>
          </div>
          <div class="stat">
            <div class="stat-label">Upload</div>
            <div id="bytes-out" class="stat-value">0 MB</div>
          </div>
        </div>

        <!-- Connect/Disconnect Button -->
        <div class="action-section">
          <button id="connect-btn" class="btn btn-large btn-success">Connect</button>
          <button id="disconnect-btn" class="btn btn-large btn-danger" style="display: none;">Disconnect</button>
        </div>

        <!-- Config Actions -->
        <div class="config-actions">
          <button id="delete-config-btn" class="btn btn-text">Delete Configuration</button>
          <button id="vpn-logout-btn" class="btn btn-text">Logout</button>
        </div>
      </div>

      <!-- Connecting State -->
      <div id="connecting-state" class="state" style="display: none;">
        <div class="onboarding-container">
          <div class="loader"></div>
          <h2 class="onboarding-title" style="font-size: 28px;">Connecting...</h2>
          <p class="onboarding-subtitle">Establishing secure connection to VPN server</p>
        </div>
      </div>

      <!-- Error State -->
      <div id="error-state" class="state" style="display: none;">
        <div class="onboarding-container">
          <div class="onboarding-icon">‚ö†Ô∏è</div>
          <h2 class="onboarding-title" style="font-size: 28px;">Connection Error</h2>
          <p class="error-message" id="error-message-text"></p>
          <button id="retry-btn" class="btn btn-large">Try Again</button>
        </div>
      </div>
    </div>

    <!-- Settings Section -->
    <div class="settings-section">
      <div class="settings-header">
        <h3>Settings</h3>
      </div>
      <div class="settings-options">
        <label class="checkbox-label">
          <input type="checkbox" id="auto-connect-check">
          <span>Auto-connect on startup</span>
        </label>
        <label class="checkbox-label">
          <input type="checkbox" id="auto-start-check">
          <span>Launch at system startup</span>
        </label>
        <!-- Kill switch removed - requires OS-level firewall configuration
             Will be implemented in future version with proper platform-specific
             firewall rules (Windows Firewall, macOS PF, Linux iptables) -->
      </div>
    </div>
  </div>

  <script src="vendor/gsap.min.js"></script>
  <script src="app.js"></script>
  <!-- Three.js disabled temporarily - ES module compatibility issue -->
  <!-- <script type="module" src="three-scene.js"></script> -->
</body>
</html>
