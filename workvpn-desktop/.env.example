# BarqNet Desktop - Environment Configuration
# Copy this file to .env and fill in your values

# ============================================
# BACKEND API CONFIGURATION (REQUIRED)
# ============================================
# The base URL for the backend API server
# Default: http://localhost:8080
# Production: Use HTTPS URLs only (e.g., https://api.barqnet.com)
#
# IMPORTANT NOTES:
# - Do NOT include trailing slashes
# - Do NOT include /v1 or /api path segments (added automatically)
# - For local development with go-hello backend, use: http://localhost:8080
# - All authentication and API calls use this base URL
#
API_BASE_URL=http://localhost:8080

# DEPRECATED - No longer used (API calls use native fetch with built-in timeout)
# API_TIMEOUT=30000

# DEPRECATED - JWT tokens are now stored securely in electron-store
# Authentication tokens are managed automatically by AuthService
# AUTH_TOKEN_KEY=barqnet_auth_token
# SESSION_TIMEOUT=3600000

# OpenVPN Configuration
OPENVPN_BINARY_PATH=/usr/local/sbin/openvpn
# Windows: C:\\Program Files\\OpenVPN\\bin\\openvpn.exe
# macOS: /usr/local/sbin/openvpn (via brew)
# Linux: /usr/sbin/openvpn

OPENVPN_CONFIG_DIR=~/.barqnet/configs
OPENVPN_MANAGEMENT_PORT=7505

# VPN Settings
VPN_DNS_SERVERS=1.1.1.1,8.8.8.8
VPN_RECONNECT_ATTEMPTS=5
VPN_RECONNECT_DELAY=5000

# ============================================
# CERTIFICATE PINNING CONFIGURATION
# ============================================
# Certificate pinning protects against MITM attacks by validating
# the server's certificate against known public key hashes.
#
# IMPORTANT: Certificate pinning is REQUIRED for production deployments
# to ensure secure communication with the backend API.
#
# Enable/Disable Certificate Pinning
# Set to 'false' to disable certificate pinning (NOT recommended for production)
# Default: true (enabled for all HTTPS connections)
CERT_PINNING_ENABLED=true
#
# How to get certificate pins:
# 1. Use the extraction script (recommended):
#    ./scripts/extract-cert-pins.sh --server api.example.com
#
# 2. Use interactive mode:
#    ./scripts/extract-cert-pins.sh
#
# 3. Show Let's Encrypt backup pins:
#    ./scripts/extract-cert-pins.sh --letsencrypt
#
# 4. Manual extraction:
#    openssl s_client -connect api.example.com:443 < /dev/null 2>/dev/null | \
#      openssl x509 -pubkey -noout | \
#      openssl pkey -pubin -outform der | \
#      openssl dgst -sha256 -binary | \
#      base64
#
# Certificate Pin Configuration
# ALWAYS configure at least 2 pins:
# - Primary: Current production certificate (leaf certificate)
# - Backup: Intermediate CA or future certificate (for smooth rotation)
#
# Leave empty in development to use fallback CA pins
# In production, if empty, will use well-known CA pins (Let's Encrypt, DigiCert)
#
CERT_PIN_PRIMARY=
CERT_PIN_BACKUP=
#
# Example with Let's Encrypt certificate:
# Primary pin (your specific certificate)
# CERT_PIN_PRIMARY=sha256/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=
#
# Backup pins (Let's Encrypt intermediate CAs - for rotation flexibility)
# CERT_PIN_BACKUP=sha256/jQJTbIh0grw0/1TkHSumWb+Fs0Ggogr621gT3PvPKG0=
#
# Well-Known CA Pins (used as fallback if no pins configured in production):
#
# Let's Encrypt:
#   R3 Intermediate:  sha256/jQJTbIh0grw0/1TkHSumWb+Fs0Ggogr621gT3PvPKG0=
#   E1 Intermediate:  sha256/VQYeFC8zhEDLrcyYYWBvPTfM5VWhTzfhEHQ9L5wBaB0=
#   ISRG Root X1:     sha256/C5+lpZ7tcVwmwQIMcRtPbsQtWLABXhQzejna0wHFr8M=
#
# DigiCert:
#   Global Root G2:             sha256/i7WTqTvh0OioIruIfFR4kMPnBqrS2rdiVPl/s2uC/CY=
#   TLS RSA SHA256 2020 CA1:    sha256/RQeZkB42znUfsDIIFWWHm0nizHcVpsJNL8Qgg6iEvto=
#
# Pin rotation strategy:
# 1. Extract new certificate pin before expiration (30+ days recommended)
# 2. Update CERT_PIN_BACKUP with new certificate pin
# 3. Deploy updated application to users
# 4. Rotate actual certificate on server
# 5. Update CERT_PIN_PRIMARY to match new certificate
# 6. Deploy again
# 7. After verification, you can update CERT_PIN_BACKUP for next rotation
#
# This ensures zero downtime during certificate rotation

# Kill Switch (future)
ENABLE_KILL_SWITCH=false

# Logging
LOG_LEVEL=info
# Options: error, warn, info, debug
LOG_FILE_PATH=~/.barqnet/logs/barqnet.log
MAX_LOG_FILE_SIZE=10485760
# Size in bytes (10MB default)

# Auto-Start
AUTO_START_ON_BOOT=false
AUTO_CONNECT_ON_LAUNCH=false

# UI Configuration
THEME=system
# Options: light, dark, system
MINIMIZE_TO_TRAY=true
SHOW_NOTIFICATIONS=true

# Update Configuration
CHECK_FOR_UPDATES=true
AUTO_DOWNLOAD_UPDATES=false

# Development Settings (remove in production)
ENABLE_DEV_TOOLS=false
SKIP_SSL_VERIFICATION=false
# WARNING: Only use SKIP_SSL_VERIFICATION for local testing

# ============================================
# BACKEND API ENDPOINTS (AUTOMATIC)
# ============================================
# The following endpoints are automatically constructed from API_BASE_URL
# DO NOT modify these unless the backend API contract changes
#
# Authentication Endpoints:
#   POST ${API_BASE_URL}/v1/auth/otp/send
#   POST ${API_BASE_URL}/v1/auth/otp/verify
#   POST ${API_BASE_URL}/v1/auth/register
#   POST ${API_BASE_URL}/v1/auth/login
#   POST ${API_BASE_URL}/v1/auth/refresh
#   POST ${API_BASE_URL}/v1/auth/logout
#
# VPN Configuration Endpoints (Future):
#   GET  ${API_BASE_URL}/v1/vpn/config
#   POST ${API_BASE_URL}/v1/vpn/config/custom
#
# VPN Status Endpoints (Future):
#   POST ${API_BASE_URL}/v1/vpn/status
#   POST ${API_BASE_URL}/v1/vpn/stats

# Sentry Error Reporting (optional)
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
# ENABLE_ERROR_REPORTING=false

# Analytics (optional)
# ENABLE_ANALYTICS=false
# ANALYTICS_ID=UA-XXXXXXXXX-X

# Feature Flags
ENABLE_WIREGUARD=false
# WireGuard support coming soon

# Advanced
ELECTRON_STORE_NAME=barqnet-config
ELECTRON_STORE_ENCRYPTION_KEY=
# Leave empty to generate automatically

# Platform-Specific
# macOS
MACOS_START_AT_LOGIN=false

# Windows
WINDOWS_RUN_AS_ADMIN=true
# Required for VPN operations on Windows

# Linux
LINUX_USE_SYSTEMD=false
