# ChameleonVPN / BarqNet Backend Configuration
# Copy this file to .env and update with your values
#
# ⚠️  SECURITY WARNING ⚠️
# ============================================================================
# The values below are EXAMPLES ONLY and are NOT SECURE for production use!
#
# BEFORE DEPLOYING TO PRODUCTION, YOU MUST:
# 1. Generate a strong, random JWT_SECRET (minimum 32 characters)
# 2. Use a strong database password (NOT "barqnet123")
# 3. Use a strong API_KEY (minimum 16 characters, randomly generated)
# 4. Enable SSL for database connections (DB_SSLMODE=require)
# 5. Set strong Redis password if Redis is exposed
#
# To generate secure values:
#   JWT_SECRET:  openssl rand -base64 48
#   API_KEY:     openssl rand -hex 32
#   DB_PASSWORD: openssl rand -base64 24
# ============================================================================

# ============================================================================
# Database Configuration
# ============================================================================
DB_HOST=localhost
DB_PORT=5432
DB_USER=barqnet
DB_PASSWORD=barqnet123  # ⚠️  CHANGE THIS IN PRODUCTION!
DB_NAME=barqnet
DB_SSLMODE=disable      # ⚠️  USE 'require' IN PRODUCTION!

# ============================================================================
# API Configuration (CRITICAL SECURITY)
# ============================================================================
# ⚠️  These MUST be changed before production deployment!
# Generate with: openssl rand -base64 48 (for JWT_SECRET)
#                openssl rand -hex 32 (for API_KEY)
API_KEY=your_api_key_here                    # ⚠️  REPLACE WITH RANDOM VALUE!
JWT_SECRET=your_jwt_secret_key_here          # ⚠️  REPLACE WITH RANDOM VALUE (32+ chars)!

# ============================================================================
# Redis Configuration for Rate Limiting
# ============================================================================

# Enable or disable rate limiting (default: true)
RATE_LIMIT_ENABLED=true

# Redis connection settings
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=           # ⚠️  SET A STRONG PASSWORD IF REDIS IS EXPOSED!
REDIS_DB=0

# ============================================================================
# Rate Limit Configuration
# ============================================================================

# OTP Send Rate Limit
# Maximum OTP requests per phone number within the time window
RATE_LIMIT_OTP_MAX=5
RATE_LIMIT_OTP_WINDOW_MINUTES=60

# Login Rate Limit
# Maximum login attempts per phone number within the time window
RATE_LIMIT_LOGIN_MAX=10
RATE_LIMIT_LOGIN_WINDOW_MINUTES=60

# Registration Rate Limit
# Maximum registration attempts per IP address within the time window
RATE_LIMIT_REGISTER_MAX=3
RATE_LIMIT_REGISTER_WINDOW_MINUTES=60

# General API Rate Limit
# Maximum API requests per IP address within the time window
RATE_LIMIT_API_MAX=100
RATE_LIMIT_API_WINDOW_SECONDS=60

# ============================================================================
# Notes:
# ============================================================================
# 1. Rate limiting uses Redis as the backend store for tracking request counts
# 2. If Redis is unavailable, the system operates in DEGRADED mode (allows all requests)
# 3. Rate limit headers (X-RateLimit-*) are included in API responses
# 4. 429 status code is returned when rate limits are exceeded
# 5. Set RATE_LIMIT_ENABLED=false to completely disable rate limiting
# ============================================================================
