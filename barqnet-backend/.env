# ============================================================================
# BarqNet Backend Configuration - Production
# ============================================================================
# Repository: Private
# Last Updated: 2025-11-19
#
# ⚠️  IMPORTANT: On first server deployment, generate new secrets:
#     JWT_SECRET:  openssl rand -base64 48
#     API_KEY:     openssl rand -hex 32
#
# ⚠️  Update DB_PASSWORD with your PostgreSQL password

# ============================================================================
# Database Configuration
# ============================================================================
DB_HOST=localhost
DB_PORT=5432
DB_USER=vpnmanager
DB_PASSWORD=barqnet123
DB_NAME=vpnmanager
DB_SSLMODE=disable

# ============================================================================
# API Configuration (GENERATE ON SERVER!)
# ============================================================================
# Run on server after pulling:
#   export JWT_SECRET="$(openssl rand -base64 48)"
#   export API_KEY="$(openssl rand -hex 32)"
#   sed -i "s|JWT_SECRET=.*|JWT_SECRET=$JWT_SECRET|" .env
#   sed -i "s|API_KEY=.*|API_KEY=$API_KEY|" .env
API_KEY=GENERATE_ON_SERVER_WITH_OPENSSL_RAND
JWT_SECRET=GENERATE_ON_SERVER_WITH_OPENSSL_RAND

# ============================================================================
# Redis Configuration for Rate Limiting
# ============================================================================
RATE_LIMIT_ENABLED=true
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# Rate limiting settings
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_BURST=10

# ============================================================================
# Server Configuration
# ============================================================================
# Management Server
MANAGEMENT_PORT=8080
MANAGEMENT_HOST=0.0.0.0

# VPN Server
VPN_PORT=8081
VPN_HOST=0.0.0.0

# End Node
END_NODE_PORT=8082
END_NODE_HOST=0.0.0.0

# ============================================================================
# OpenVPN Configuration
# ============================================================================
OPENVPN_PORT=1194
OPENVPN_PROTOCOL=udp
OPENVPN_CONFIG_DIR=/etc/openvpn
OPENVPN_LOG_DIR=/var/log/openvpn

# ============================================================================
# Security Settings
# ============================================================================
# Session configuration
SESSION_TIMEOUT_MINUTES=60
REFRESH_TOKEN_VALID_DAYS=30

# OTP configuration
OTP_LENGTH=6
OTP_EXPIRY_MINUTES=5
OTP_MAX_ATTEMPTS=3

# Password requirements
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBER=true
PASSWORD_REQUIRE_SPECIAL=false

# ============================================================================
# Development/Production Mode
# ============================================================================
ENVIRONMENT=development
DEBUG=true
LOG_LEVEL=info

# ============================================================================
# Email Service Configuration (Resend)
# ============================================================================
# Development mode: emails logged to console
# Production mode: set EMAIL_SERVICE_MODE=resend and configure API key
#
# To enable Resend:
# 1. Sign up at resend.com (free tier: 3,000 emails/month)
# 2. Get API key: https://resend.com/api-keys
# 3. Set RESEND_API_KEY below
# 4. Set EMAIL_SERVICE_MODE=resend
#
RESEND_API_KEY=re_StPs2Sk8_7Pka5gWJkF2Nzkm3GmzhDS3Z
RESEND_FROM_EMAIL=onboarding@resend.dev  # Using Resend's test email
EMAIL_SERVICE_MODE=resend  # ✅ ENABLED - Real email delivery via Resend

# For production with custom domain:
# RESEND_FROM_EMAIL=no-reply@mail.barqnet.com
# (Add domain at: https://resend.com/domains)

# ============================================================================
# IMPORTANT SETUP INSTRUCTIONS
# ============================================================================
# 1. Update DB_PASSWORD with your actual database password
# 2. Generate secure JWT_SECRET: openssl rand -base64 48
# 3. Generate secure API_KEY: openssl rand -hex 32
# 4. Set ENVIRONMENT=production when deploying
# 5. Set DEBUG=false in production
# 6. Enable DB_SSLMODE=require in production
# 7. Set strong REDIS_PASSWORD if Redis is exposed
# 8. Set RESEND_API_KEY and EMAIL_SERVICE_MODE=resend for production
